<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESCONDITE_INGLES_REGULAR</title>
    <style>
        canvas
        {
            background: grey;
            border: 2px solid black;
            display: block;
            margin: 0 auto;
        }

        #b1{
            display: block;
            margin: 10px auto;
            padding: 10px 20px;
            font-size: 16px;
        }

        .button-container {
            display: flex;
            justify-content: space-evenly;
            margin-top: -8px;
        }

        .space-button{
            margin-left: -300px;
            margin-right: -300px;
        }

        .nombre-Mario {
            background-color: red;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .nombre-Luigi {
            background-color: green;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .nombre-Sonic {
            background-color: blue;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .button-Mario {
            padding: 10px 15px;
            border: 2px solid red;
            cursor: pointer;
            float: left 5px;
            transition: color 0.5s ease;
        }

        .button-Mario:hover {
            background-color: red;
            color: white;
        }

        .button-Luigi {
            padding: 10px 15px;
            border: 2px solid green;
            cursor: pointer;
            float: left 5px;
            transition: color 0.5s ease;
        }

        .button-Luigi:hover {
            background-color: green;
            color: white;
        }

        .button-Sonic {
            padding: 10px 15px;
            border: 2px solid blue;
            cursor: pointer;
            float: left 5px;
            transition: color 0.5s ease;
        }

        .button-Sonic:hover {
            background-color: blue;
            color: white;
        }

        .start_button{
            padding: 10px 15px;
            border: 2px solid blue;
            cursor: pointer;
            float: left 5px;
            transition: color 0.5s ease;
        }

        .start_div{
            display: flex;
            justify-content: center;
        }

        h3{
            float: left;
        }

    </style>
</head>
<body>

    <canvas id="gameCanvas" width="700" height="670"></canvas>

    <div class="button-container">
        
    <div>
        <h4 class="nombre-Mario">Mario</h4>
        <button class="button-Mario" onclick="setAccion('jugador1', 'andar')">Avanzar!!</button>
        <button class="button-Mario" onclick="setAccion('jugador1', 'parar')">Parar!!</button>
        <p id="estado-jugador1"></p>
    </div>

    <div class="space-button">
        <h4 class="nombre-Luigi">Luigi</h4>
        <button class="button-Luigi" onclick="setAccion('jugador2', 'andar')">Avanzar!!</button>
        <button class="button-Luigi" onclick="setAccion('jugador2', 'parar')">Parar!!</button>
        <p id="estado-jugador2"></p>
    </div>

    <div>
        <h4 class="nombre-Sonic">Sonic</h4>
        <button class="button-Sonic" onclick="setAccion('jugador3', 'andar')">Avanzar!!</button>
        <button class="button-Sonic" onclick="setAccion('jugador3', 'parar')">Parar!!</button>
        <p id="estado-jugador3"></p>
    </div>

    </div>


    <div class="start_div">
    <button class="start_button" onclick="jugarTurno()">ðŸŽ² Jugar turno</button>
    </div>

    <div class="start_div">
    <h3>Resultados:</h3>
    <pre id="resultados"></pre>
    </div>



    <script>

        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');


        let cuadrado1 = {
            x: 30,
            y: 550,
            w: 30,
            h: 50,
        };

        let cuadrado2 = {
            x: 30,
            y: 490,
            w: 30,
            h: 50,
        };

        let jugador1 = {
            x: 150,
            y: 600,
            w: 50,
            h: 65,
            imagen: new Image(),
            posicion: 0, 
            corazon: false, 
            accion: "parar",
        };

        let jugador2 = {
            x: 300,
            y: 600,
            w: 50,
            h: 65,
            imagen: new Image(),
            posicion: 0, 
            corazon: false, 
            accion: "parar",
        };

        let jugador3 = {
            x: 450,
            y: 600,
            w: 50,
            h: 65,
            imagen: new Image(),
            posicion: 0, 
            corazon: false, 
            accion: "parar",
        };

        jugador1.imagen.src = "imagenes/Jugador1.png";
        jugador2.imagen.src = "imagenes/Jugador2.png";
        jugador3.imagen.src = "imagenes/Jugador3.png";

        let jugadores = [jugador1, jugador2, jugador3];


        let dadoNegro1 = [1, 1, 1, 1, 2, 2];
        let dadoNegro2 = [1, 1, 1, 1, 0, 0];
        let dadoNegro3 = [1, 1, 0, 0, 0, 0];


        const dadoRojo = [1,1,1,1,1,0];

        let bolsa = [dadoNegro1, dadoNegro2, dadoNegro3, "rojo"];

        let negrosUsados = []



        function pintarCuadrado1() 
        {
            ctx.fillStyle = 'black';
            ctx.fillRect(cuadrado1.x,cuadrado1.y,cuadrado1.w,cuadrado1.h);

            ctx.fillStyle = 'black';
            ctx.fillRect(cuadrado1.x,cuadrado1.y - 120,cuadrado1.w,cuadrado1.h);

            ctx.fillStyle = 'black';
            ctx.fillRect(cuadrado1.x,cuadrado1.y - 240,cuadrado1.w,cuadrado1.h);

            ctx.fillStyle = 'black';
            ctx.fillRect(cuadrado1.x,cuadrado1.y - 360,cuadrado1.w,cuadrado1.h);

            ctx.fillStyle = 'black';
            ctx.fillRect(cuadrado1.x,cuadrado1.y - 480,cuadrado1.w,cuadrado1.h);
        };

        function pintarCuadrado2() 
        {
            ctx.fillStyle = 'white';
            ctx.fillRect(cuadrado2.x,cuadrado2.y,cuadrado2.w,cuadrado2.h);

            ctx.fillStyle = 'white';
            ctx.fillRect(cuadrado2.x,cuadrado2.y - 120,cuadrado2.w,cuadrado2.h);

            ctx.fillStyle = 'white';
            ctx.fillRect(cuadrado2.x,cuadrado2.y - 240,cuadrado2.w,cuadrado2.h);

            ctx.fillStyle = 'white';
            ctx.fillRect(cuadrado2.x,cuadrado2.y - 360,cuadrado2.w,cuadrado2.h);

            ctx.fillStyle = 'white';
            ctx.fillRect(cuadrado2.x,cuadrado2.y - 480,cuadrado2.w,cuadrado2.h);
        };

        pintarCuadrado1();
        pintarCuadrado2();

        function pintarJugadores() {
            
            ctx.drawImage(jugador1.imagen,jugador1.x,jugador1.y,jugador1.w,jugador1.h);
            ctx.drawImage(jugador2.imagen,jugador2.x,jugador2.y,jugador2.w,jugador2.h);
            ctx.drawImage(jugador3.imagen,jugador3.x,jugador3.y,jugador3.w,jugador3.h);


            requestAnimationFrame(pintarJugadores);
        };

        pintarJugadores();


        function sacarDado() {

            if (bolsa.length === 0) {
                let bolsa = [dadoNegro1, dadoNegro2, dadoNegro3, "rojo"];
            }
            
            let indice = Math.floor(Math.random() * bolsa.length);
            let dado = bolsa.splice(indice, 1)[0];
            return dado;
        }

        function tirar(dado) {
            let caras = dado;
            let indice = Math.floor(Math.random() * caras.length);
            return caras[indice];
        }  

        function setAccion(jugador, accion) {
            const j = jugadores.find(j => j.nombre === jugador);
            j.accion = accion;
            document.getElementById("estado-" + jugador).textContent = `EligiÃ³: ${accion}`;
        }


        let turnoActual = 1;


        function jugarTurno() {
            const resultado = document.getElementById("resultados");
            resultado.textContent += `\n--- TURNO ${turnoActual} ---\n`;

            const dadoSacado = sacarDado();
            resultado.textContent += `Dado sacado: ${dadoSacado === "rojo" ? "ROJO" : "NEGRO"}\n`;

            jugadores.forEach(j => {
                resultado.textContent += `${j.nombre} eligiÃ³ ${j.accion}, posiciÃ³n: ${j.posicion}, corazÃ³n: ${j.corazon}\n`;

                if (j.accion === "parar") {
                if (dadoSacado === "rojo" && !j.corazon) {
                    j.corazon = true;
                    resultado.textContent += `${j.nombre} gana un â¤ï¸\n`;
                    
                }
                } else if (j.accion === "andar") {
                if (dadoSacado === "rojo") {
                    if (j.corazon) {
                    j.corazon = false;
                    resultado.textContent += `${j.nombre} pierde su â¤ï¸\n`;
                    
                } else {
                    const retroceso = dadosNegrosSalidos.map(tirar).reduce((a, b) => a + b, 0) + tirar(dadoRojo);
                    j.posicion = Math.max(0, j.posicion - retroceso);
                    resultado.textContent += `${j.nombre} retrocede ${retroceso} â†’ posiciÃ³n ${j.posicion}\n`;
                    }
                } else {
                    dadosNegrosSalidos.push(dadoSacado);
                    const avance = dadosNegrosSalidos.map(tirar).reduce((a, b) => a + b, 0);
                    j.posicion += avance;
                    resultado.textContent += `${j.nombre} avanza ${avance} â†’ posiciÃ³n ${j.posicion}\n`;
                }
                }

                if (j.posicion >= 10) {
                resultado.textContent += `ðŸŽ‰ Â¡${j.nombre} ha GANADO!\n`;
                }
        });

      turnoActual++;
    }
        


    </script>
</body>
</html>